<!doctype html> 
<head> 
<meta name="KEYWords" Content="mainPageFlag">
<meta http-equiv="Pragma" CONTENT="no-cache">
<meta http-equiv="Cache-Control" CONTENT="no-cache">
<meta http-equiv="Expires" CONTENT="-1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
<title>和目路由器-中国移动</title>
<link href="herouter/css/mainstyle.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="herouter/js/jquery.js"></script>
<script type="text/javascript" src="herouter/js/jquery.vegas.min.js"></script>
<script type="text/javascript" src="herouter/js/tinybox.js"></script>
<script type="text/javascript" src="herouter/js/herouter.js"></script>

<link href="herouter/css/jquery.vegas.css" rel="stylesheet" type="text/css" />
<link href="herouter/css/and.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" href="herouter/css/icons.css" />
<link rel="stylesheet" type="text/css" href="herouter/css/style1.css" />

<!--[if IE 8]>
<link rel="stylesheet" type="text/css" href="css/style1_ie8.css" />
<![endif]-->
<script type="text/javascript">

var WIFIAuthMode = "<%getHeInfo("WIFIAuthMode");%>";
var wifi_off1='<%getHeInfo("wifi_off","wlan1")%>';
var wifi_off2='<%getHeInfo("wifi_off","wlan2")%>';
var EncrypType='<%getHeInfo("EncrypType");%>';	
var IEEE8021X  = '0';
var ConMode = "<%getHeInfo("ConMode")%>";
var WANIP = "<%getInfo("wan-ip");%>";
var isWanPortPlug = "<%getHeInfo("WanPortPlug");%>";
var isNeedWizard = "<%getHeInfo("isNeedWizard");%>";
var PingStatus = "<%getHeInfo("PingStatus");%>";
var newUrl;
var url_login = "http://" + "<%getInfo("ip-rom")%>" + "/login.html";
var mode = "<%getHeInfo("opMode")%>";
var repeaterMode = "<%getHeInfo("repeaterMode")%>";
var repeaterState = "<%getHeInfo("repeaterConnectState")%>";

$(function() {
  $.vegas({
    src:'herouter/images/bodybg.jpg'
  });
});
function resetMenu(){
 TINY.box.show({iframe:'herouter/sysstate.asp',boxid:'frameless',width:700,height:530,fixed:false,maskopacity:40})
 
	 $("#bt-menu").removeClass("bt-menu-open");
	 $("#bt-menu").addClass("bt-menu-close");
	 
}
function ipv6Menu(){
	TINY.box.show({iframe:'herouter/ipv6_wan.asp',boxid:'frameless',width:700,height:530,fixed:false,maskopacity:40})
 
	 $("#bt-menu").removeClass("bt-menu-open");
	 $("#bt-menu").addClass("bt-menu-close");
}
function advsetting(){
	var currOpmode = "<%getHeInfo("opMode")%>";
    if(currOpmode==0)
    {
       TINY.box.show({iframe:'herouter/WANConfig.asp',boxid:'frameless',width:700,height:420,fixed:false,maskopacity:40}) 
    }else{
       TINY.box.show({iframe:'herouter/DHCPbanding.asp',boxid:'frameless',width:700,height:420,fixed:false,maskopacity:40})
    }
 
	$("#bt-menu").removeClass("bt-menu-open");
	$("#bt-menu").addClass("bt-menu-close");
	
}

function wireless_setting(){
 TINY.box.show({iframe:'herouter/wireless_guest.asp?number=' + Math.random(), boxid:'frameless', width:700,height:420,fixed:false,maskopacity:40})
 
	$("#bt-menu").removeClass("bt-menu-open");
	 $("#bt-menu").addClass("bt-menu-close");	
}

function reload()
{
  window.location.href="/login.html";
}

function showuploading(){
	setTimeout("TINY.box.show({html:'<div class=waiting2 style=display:;><h2>配置导入中，请稍候</h2><div class=animation></div></div>',animate:false,close:false,boxid:'',top:5})",3000);
	//TINY.box.show({html:'<div class=waiting2 style=display:;><h2>配置导入中，请稍候</h2><div class=animation></div></div>',animate:false,close:false,boxid:'',top:5});
	setTimeout("TINY.box.show({html:'<div class=waiting3 style=display:;><h2>请勿断电！配置导入中，请关闭本页面并在5分钟后使用和路由。</h2><div class=animation></div></div>',animate:false,close:false,boxid:'',top:5})",10000);
	setTimeout("TINY.box.hide();reload();", 85000);
}

function showupdating(){
	//setTimeout("TINY.box.show({html:'<div class=waiting2 style=display:;><h2>路由升级中，请稍候</h2><div class=animation></div></div>',animate:false,close:false,boxid:'',top:5})",3000);
TINY.box.show({html:'<div class=waiting2 style=display:;><h2>路由升级中，请稍候</h2><div class=animation></div></div>',animate:false,close:false,boxid:'',top:5});
	setTimeout("TINY.box.show({html:'<div class=waiting3 style=display:;><h2>请勿断电！升级中，请关闭本页面并在5分钟后使用和路由。</h2><div class=animation></div></div>',animate:false,close:false,boxid:'',top:5})",10000);
	setTimeout("TINY.box.hide();reload();", 120000);
}

function showLocalupdating(){
	//setTimeout("TINY.box.show({html:'<div class=waiting2 style=display:;><h2>路由升级中，请稍候</h2><div class=animation></div></div>',animate:false,close:false,boxid:'',top:5})",5000);
//	setTimeout("TINY.box.show({html:'<div class=waiting3 style=display:;><h2>请勿断电！升级中，请关闭本页面并在1分钟后使用和路由。</h2><div class=animation></div></div>',animate:false,close:false,boxid:'',top:5})",10000);
TINY.box.show({html:'<div class=waiting3 style=display:;><h2>请勿断电！升级中，请等待1分钟后使用和路由。</h2><div class=animation></div></div>',animate:false,close:false,boxid:'',top:5});
	setTimeout("TINY.box.hide();reload();", 60000);
}

function restored_reload()
{
//	window.location.replace("http://192.168.8.1/login.html");
	window.location.replace(url_login);
}

function showrestoring(){
	setTimeout("TINY.box.show({html:'<div class=waiting3 style=display:;><h2>重启中，无线网络将断开，请关闭页面并在1分钟后重新进入</h2><div class=animation></div></div>',animate:false,close:false,boxid:'',top:5})",1000);
	setTimeout("TINY.box.hide();restored_reload()", 70000);
}

function showchangepwd(){
	TINY.box.show({html:'<div class=waiting3 style=display:;><h2>密码修改成功，请重新登录</h2><div class=animation></div></div>',animate:false,close:false,boxid:'',top:5});
	setTimeout("TINY.box.hide();reload();", 3000);
}

function showChangeOpmode(){
	TINY.box.show({html:'<div class=waiting3 style=display:;><h2>网络模式修改成功！请等待30秒...</h2><div class=animation></div></div>',animate:false,close:false,boxid:'',top:5});
	setTimeout("TINY.box.hide();reload_main();", 20000);
}
function showChangeRtOpmode(){
	setTimeout("TINY.box.show({html:'<div class=waiting3 style=display:;><h2>无线网络将断开，请在30秒后重新进入页面</h2><div class=animation></div></div>',animate:false,close:false,boxid:'',top:5})", 5000);
	setTimeout("TINY.box.hide();reload_main();", 40000);
}
function reload_main()
{
  window.location.href="/main.html";
}

function showConfProcess(){
	setTimeout("TINY.box.show({html:'<div class=waiting3 style=display:;><h2>设置成功，无线网络将断开，请关闭页面并在30秒后重新进入</h2><div class=animation></div></div>',animate:false,close:false,boxid:'',top:5})",3000);
	setTimeout("TINY.box.hide();reload_main();", 20000);
}

function showWifiConfProcess(){
	setTimeout("TINY.box.show({html:'<div class=waiting2 style=display:;><h2>正在设置路由器，请稍候</h2><div class=animation></div></div>',animate:false,close:false,boxid:'',top:5})",3000);
	setTimeout("TINY.box.show({html:'<div class=waiting3 style=display:;><h2>设置成功，无线网络将断开，请关闭页面并在1分钟后重新进入</h2><div class=animation></div></div>',animate:false,close:false,boxid:'',top:5})",10000);
	setTimeout("TINY.box.hide();reload_main();", 30000);
}

function showSettingProcess(){
	setTimeout("TINY.box.show({html:'<div class=waiting2 style=display:;><h2>正在保存设置,请稍候</h2><div class=animation></div></div>',animate:false,close:false,boxid:'',top:5})",3000);
	setTimeout("TINY.box.show({html:'<div class=waiting3 style=display:;><h2>设置成功，无线网络将断开，请在30秒后重新进入本页面</h2><div class=animation></div></div>',animate:false,close:false,boxid:'',top:5})",10000);
	setTimeout("TINY.box.hide();reload_main();", 30000);
}

function  getNewLinkValue(value)
{
  newUrl = value;
}

function reloadNewMain()
{
	window.location.replace(newUrl);
}

function showEntProcess(){
	setTimeout("TINY.box.show({html:'<div class=waiting3 style=display:;><h2>正在保存设置，请稍候...</h2><div class=animation></div></div>',animate:false,close:false,boxid:'',top:5})",1000);
	//setTimeout("TINY.box.hide();Alert('设置成功，无线网络将断开，请在30秒后重新进入本页面', 30);",30000);
	setTimeout("TINY.box.show({html:'<div class=waiting3 style=display:;><h2>设置成功，无线网络将断开，请在30秒后重新进入本页面</h2><div class=animation></div></div>',animate:false,close:false,boxid:'',top:5});",2000);
	setTimeout("reloadNewMain();", 30000);
}

function openwifipage()
{
	TINY.box.show({iframe:'herouter/wifisetting1.asp',boxid:'frameless',width:700,height:530,fixed:false,maskopacity:40})		
}
function openMACpage()
{
	TINY.box.show({iframe:'herouter/wireless_mac.asp',boxid:'frameless',width:700,height:420,fixed:false,maskopacity:40})		
}
function openQuick()
{
	TINY.box.show({iframe:'herouter/QuickSetUp.asp',boxid:'frameless',width:700,height:420,fixed:false,maskopacity:40})
}
function startGetInternetStatusRequest()
{
    var currOpmode = "<%getHeInfo("opMode")%>";
    var pingState = "<%getHeInfo("PingStatus");%>";
    
    if(currOpmode==0)
    {
        $("#internet").removeClass("intbridge");  
    }else{
        $("#internet").addClass("intbridge");  
    }
    
    if (currOpmode ==0 && PingStatus != "pass")	{
  	  $("#internet").addClass("interr");  
	  }else{
	      $("#internet").removeClass("interr");	
	  }
}
$(document).ready(function(){
	
	if(mode ==1){
		$('#exfirewall').css('color','#a9a3a3');
	}
	
	//wifi enable
	if(wifi_off1 == 0 || wifi_off2==0){
		  
          $("#wifistate").addClass("wifiok");  
	}else{
		  $("#wifistate").addClass("wificlose");
	}

	//internet ico
  if (mode ==0 && PingStatus != "pass")	{
  	  $("#internet").addClass("interr");  
  }else{
      $("#internet").removeClass("interr");	
  }
	
    // Internet
  setInterval("startGetInternetStatusRequest()",2000);

	if(isNeedWizard == 1)
	{
		if(mode==1 && repeaterMode==1)
		{
			if(repeaterState=="Connected")
			{
			    
				TINY.box.show({iframe:'herouter/opmode.asp',boxid:'frameless',width:700,height:530,fixed:false,maskopacity:40})
			}else{
				
				//TINY.box.show({iframe:'herouter/apcliscan.asp',boxid:'frameless',width:700,height:530,fixed:false,maskopacity:40})
				//if(apcliSelect == "2860")
	      		//TINY.box.show({iframe:'apcliscan.shtml?number=' + Math.random(),boxid:'frameless',width:700,height:530,fixed:false,maskopacity:40})
				//else
				TINY.box.show({iframe:'herouter/apcliscan5g.asp?number=' + Math.random(),boxid:'frameless',width:700,height:530,fixed:false,maskopacity:40})
			}
		}else
    		TINY.box.show({iframe:'herouter/QuickSetUp.asp',boxid:'frameless',width:700,height:420,fixed:false,maskopacity:40})
	}else{
		if(mode==1 && repeaterMode==1)
		{
			if(repeaterState=="Connected")
			{
			    
				TINY.box.show({iframe:'herouter/opmode.asp',boxid:'frameless',width:700,height:530,fixed:false,maskopacity:40})
			}else{
			    
				//TINY.box.show({iframe:'herouter/apcliscan.asp',boxid:'frameless',width:700,height:530,fixed:false,maskopacity:40})
				//if(apcliSelect == "2860")
	      		//TINY.box.show({iframe:'apcliscan.shtml?number=' + Math.random(),boxid:'frameless',width:700,height:530,fixed:false,maskopacity:40})
				//else
				TINY.box.show({iframe:'herouter/apcliscan5g.asp?number=' + Math.random(),boxid:'frameless',width:700,height:530,fixed:false,maskopacity:40})
			}
		}
	}
//	document.getElementById("qrcode").style.visibility = "hidden";
//	document.getElementById("qrcode").style.display = "none";
});

function reboot_alert()
{
    if (confirm("您确定需要重启吗?")){ 
        document.reboot.submit(); 
        showrestoring();
    }else{ 
    	  /*do nothing*/
    }
}

function routerMode()
{
	if(mode == 1 && repeaterMode == 1){
			TINY.box.show({iframe:'herouter/apcliscan5g.asp?number=' + Math.random(),boxid:'frameless',width:700,height:530,fixed:false,maskopacity:40});
	}
	else
		TINY.box.show({iframe:'herouter/opmode.asp?number=' + Math.random(),boxid:'frameless',width:700,height:530,fixed:false,maskopacity:40});

}
function firewall(){
	
	var currOpmode = "<%getHeInfo("opMode")%>";
  if(currOpmode==0){
    	TINY.box.show({iframe:'herouter/ALGconfig.asp?number=' + Math.random(),boxid:'frameless',width:700,height:420,fixed:false,maskopacity:40})
 
			$("#bt-menu").removeClass("bt-menu-open");
			$("#bt-menu").addClass("bt-menu-close");
  }
	
}

function ShowChangepasswd()
{
	TINY.box.show({iframe:'herouter/changepassword.asp?number=' + Math.random(),boxid:'frameless',width:700,height:420,fixed:false,maskopacity:40})
}

function Showintconfig()
{
    var currOpmode = "<%getHeInfo("opMode")%>";
    if(currOpmode==0)
        TINY.box.show({iframe:'herouter/intconfig.asp',boxid:'frameless',width:700,height:420,fixed:false,maskopacity:40})
}

function getCookie(name) 
{ 
    var arr,reg=new RegExp("(^| )"+name+"=([^;]*)(;|$)");
 
    if(arr=document.cookie.match(reg))
 
        return unescape(arr[2]); 
    else 
        return null; 
} 

function delCookie(name) 
{ 
    var exp = new Date(); 
    exp.setTime(exp.getTime() - 1); 
    var cval=getCookie(name); 
    if(cval!=null) 
        document.cookie= name + "="+cval+";expires="+exp.toGMTString(); 
} 

var lastTime = new Date().getTime();
var currentTime = new Date().getTime();
var timeOut =  15 * 60 * 1000; //设置超时时间： 15分钟
$(function() {
 	/* 鼠标移动事件 */
 	$(document).mouseover(function() {
 		lastTime = new Date().getTime(); //更新操作时间

 	});
});

function testTime() {
 	currentTime = new Date().getTime(); //更新当前时间
 	if(currentTime - lastTime > timeOut) { //判断是否超时
	    delCookie('sysauth');
 		window.location.href = '/login.html';
		//window.location.replace('/login.html');
		
 	}
}

 /* 定时器  间隔1秒检测是否长时间未操作页面  */
 window.setInterval(testTime, 1000);
 
</script>
</head>


<body>
<div class="head">
	<div class="logo"></div>
	<div class="menu">
		<ul>
			<li class="line" onClick="firewall()"><strong><span id="exfirewall">防火墙管理</span></strong></li>
			<li class="line" onClick="ShowChangepasswd()"><strong><span>修改管理员密码</span></strong></li>
			<li class="line" onClick="TINY.box.show({iframe:'herouter/QuickSetUp.asp',boxid:'frameless',width:700,height:420,fixed:false,maskopacity:40})" ><strong><span class="qc"><b>设置向导</b></span></strong></li>
			<li class="line"
			onClick="TINY.box.show({iframe:'herouter/ShowSysLog.asp',boxid:'frameless',width:700,height:420,fixed:false,maskopacity:40})"
			><strong><span class="qc"><b>系统日志</b></span></strong></li>
			<form method="post" name="reboot" target="submitFrame" id="reboot" action="/boafrm/heUiReboot">
			<input type="hidden" name="LoadDefault" value="Load+Default"/>
			<li><strong><span class="reset" onclick="javascript:reboot_alert();"><b>重启路由</b></span></strong></li>
			</form>
			<!--for reboot submint-->
			<iframe style="width:0; height:0; margin-top:-10px; visibility:hidden; display:none;" name="submitFrame" src="about:blank"></iframe>
		</ul>
	</div>
</div>
<div class="mainsetting">
	<div class="ccbg">

		<div class="section2">
			<div class="linkstate">
				<div class="btnarea">
					<div class="btnint"  onclick="routerMode()">
						<span><em id="routermode" style="padding-left:54px">工作模式</span><strong></strong>
					</div>
				</div>
			</div>
		</div>


		<div class="section1">
			<div id="internet" class="intstate">
				<div class="intok "></div>
				<div class="btnarea">
					<div class="btnint" id="intbtn" style="position:absolute;" onClick="Showintconfig()" >
						<b></b><span>互联网</span><strong></strong>
					</div>
				</div>
				<div class="stateline"></div>
			</div>
			<div class="wifistate" id="wifistate">
				<div class="wifiok"></div>
				<div class="btnarea">
					<div class="btnint" id="wifibtn" onClick="TINY.box.show({iframe:'herouter/wifisetting1.asp',boxid:'frameless',width:700,height:530,fixed:false,maskopacity:40})">
						<b></b><span>无线</span><strong></strong>
					</div>
				</div>
				<div class="stateline"></div>
			</div>
			
		</div>
		<div class="section2">
			<div class="linkstate">
				<div class="btnarea">
					<div class="btnint"  onclick="TINY.box.show({iframe:'herouter/devicemag.asp',boxid:'frameless',width:700,height:530,fixed:false,maskopacity:40})">
						<span><em><% getHeInfo("wireless_dhcp_client_num"); %></em>台无线设备连接到和目路由器</span><strong></strong>
					</div>
				</div>
			</div>
		</div>
</div>

<div class="testmusic" id="bottomNav" >
	<!--<div class="qrcode"><img id="qrcode" src="herouter/images/qrcode.png" /><p>微信公众号</p></div>-->
  <div class="footer" id="version">版本:<%getInfo("fwVersion");%></div>
</div>

<nav id="bt-menu" class="bt-menu">
	<ul>
		
		<a href="#" onClick="resetMenu();" ><span style="background:url(herouter/images/sysstate.png) no-repeat center center;  display:block; width:90px; height:80px;"></span></a>
		<a href="#" onClick="wireless_setting();" ><span style="background:url(herouter/images/wifi_dd.png) no-repeat center center; display:block; width:90px; height:80px;"></span></a>
		<a href="#" onClick="advsetting();" ><span style="background:url(herouter/images/advsetting.png) no-repeat center center; display:block; width:90px; height:80px;"></span></a>
		<a href="#" onClick="ipv6Menu();" ><span style="background:url(herouter/images/wifi_IPv6.png) no-repeat center top;  display:block;margin-top:2px; width:90px; height:80px;"><span style="display: block; color: #fff;font-size: 14px;padding-top: 60px;text-align: center;text-decoration: none;font-style: normal;">IPv6设置</span></span></a>
	</ul>
</nav>

</body>
<script src="herouter/js/classie.js"></script>
<script src="herouter/js/borderMenu.js"></script>
</html>
