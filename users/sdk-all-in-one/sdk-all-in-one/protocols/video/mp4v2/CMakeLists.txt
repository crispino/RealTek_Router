cmake_minimum_required(VERSION 2.8)
#generated by ONT

PROJECT(mp4v2 CXX C)

set (ONT_SDK_ROOT ${CMAKE_CURRENT_SOURCE_DIR}/../../../)

set(LIBRARY_OUTPUT_PATH ${ONT_SDK_ROOT}/lib)

include_directories(
    ${CMAKE_CURRENT_SOURCE_DIR}/include
    ${CMAKE_CURRENT_SOURCE_DIR}/
)

if(MSVC)
    list(APPEND INC_LIST ${INC_TEMP})
    file(GLOB_RECURSE INC_TEMP FOLLOW_SYMLINKS ${CMAKE_CURRENT_SOURCE_DIR}/src/*.h)
    list(APPEND INC_LIST ${INC_TEMP})
    file(GLOB_RECURSE INC_TEMP FOLLOW_SYMLINKS ${CMAKE_CURRENT_SOURCE_DIR}/include/mp4v2/*.h)
    list(APPEND INC_LIST ${INC_TEMP})
endif(MSVC)

aux_source_directory(${CMAKE_CURRENT_SOURCE_DIR}/src SRC_LIST)
aux_source_directory(${CMAKE_CURRENT_SOURCE_DIR}/src/bmff SRC_LIST)
aux_source_directory(${CMAKE_CURRENT_SOURCE_DIR}/src/itmf SRC_LIST)
aux_source_directory(${CMAKE_CURRENT_SOURCE_DIR}/src/qtff SRC_LIST)

list(APPEND SRC_LIST ${CMAKE_CURRENT_SOURCE_DIR}/libplatform/io/File.cpp)
list(APPEND SRC_LIST ${CMAKE_CURRENT_SOURCE_DIR}/libplatform/io/FileSystem.cpp)
list(APPEND SRC_LIST ${CMAKE_CURRENT_SOURCE_DIR}/libplatform/time/time.cpp)

if(WIN32)
list(APPEND SRC_LIST ${CMAKE_CURRENT_SOURCE_DIR}/libplatform/io/File_win32.cpp )
list(APPEND SRC_LIST ${CMAKE_CURRENT_SOURCE_DIR}/libplatform/io/FileSystem_win32.cpp)
list(APPEND SRC_LIST ${CMAKE_CURRENT_SOURCE_DIR}/libplatform/number/random_win32.cpp)
list(APPEND SRC_LIST ${CMAKE_CURRENT_SOURCE_DIR}/libplatform/process/process_win32.cpp)
list(APPEND SRC_LIST ${CMAKE_CURRENT_SOURCE_DIR}/libplatform/sys/error.cpp)
list(APPEND SRC_LIST ${CMAKE_CURRENT_SOURCE_DIR}/libplatform/time/time_win32.cpp)
list(APPEND SRC_LIST ${CMAKE_CURRENT_SOURCE_DIR}/libplatform/platform_win32.cpp)
else(WIN32)
list(APPEND SRC_LIST ${CMAKE_CURRENT_SOURCE_DIR}/libplatform/io/File_posix.cpp)
list(APPEND SRC_LIST ${CMAKE_CURRENT_SOURCE_DIR}/libplatform/io/FileSystem_posix.cpp)
list(APPEND SRC_LIST ${CMAKE_CURRENT_SOURCE_DIR}/libplatform/number/random_posix.cpp)
list(APPEND SRC_LIST ${CMAKE_CURRENT_SOURCE_DIR}/libplatform/process/process_posix.cpp)
list(APPEND SRC_LIST ${CMAKE_CURRENT_SOURCE_DIR}/libplatform/sys/error.cpp)
list(APPEND SRC_LIST ${CMAKE_CURRENT_SOURCE_DIR}/libplatform/time/time_posix.cpp)
endif(WIN32)

if(_STATIC)
    add_library(${MP4V2} STATIC
       ${SRC_LIST}
    )
else(_STATIC)
    add_library(${MP4V2} SHARED
       ${SRC_LIST}
    )
endif(_STATIC)